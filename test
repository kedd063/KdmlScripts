local player = game.Players.LocalPlayer
local keyCode = "test"
local keyLink = "https://link-center.net/1030745/6fB15CyVWc9r"
local discordLink = "https://discord.gg/scVsN9E5YN"

local TweenService = game:GetService("TweenService")
local playerGui = player:WaitForChild("PlayerGui")
local setClipboard = setclipboard or toclipboard or function() end

local function createKeyInputGui()
    local gui = Instance.new("ScreenGui")
    gui.Name = "KeyInputGui"
    gui.ResetOnSpawn = false
    gui.Parent = playerGui

    local frame = Instance.new("Frame")
    frame.Size = UDim2.new(0, 340, 0, 240)
    frame.Position = UDim2.new(0.5, 0, 0.5, 0)
    frame.BackgroundColor3 = Color3.fromRGB(25, 25, 35)
    frame.BorderSizePixel = 0
    frame.AnchorPoint = Vector2.new(0.5, 0.5)
    frame.Parent = gui
    Instance.new("UICorner", frame).CornerRadius = UDim.new(0, 20)

    -- Title Icon
    local titleIcon = Instance.new("ImageLabel")
    titleIcon.Size = UDim2.new(0, 24, 0, 24)
    titleIcon.Position = UDim2.new(0, 10, 0, 10)
    titleIcon.BackgroundTransparency = 1
    titleIcon.Image = "rbxassetid://77684173042541"
    titleIcon.Parent = frame

    local title = Instance.new("TextLabel")
    title.Size = UDim2.new(1, -40, 0, 40)
    title.Position = UDim2.new(0, 40, 0, 10)
    title.BackgroundTransparency = 1
    title.Text = "Enter Access Key"
    title.Font = Enum.Font.GothamBold
    title.TextSize = 24
    title.TextColor3 = Color3.fromRGB(0, 170, 255)
    title.TextXAlignment = Enum.TextXAlignment.Left
    title.Parent = frame

    local textbox = Instance.new("TextBox")
    textbox.Size = UDim2.new(0, 300, 0, 40)
    textbox.Position = UDim2.new(0.5, -150, 0, 60)
    textbox.PlaceholderText = "Enter Key Here"
    textbox.ClearTextOnFocus = true
    textbox.Font = Enum.Font.GothamBold
    textbox.TextSize = 20
    textbox.BackgroundColor3 = Color3.fromRGB(40, 40, 50)
    textbox.TextColor3 = Color3.new(1,1,1)
    textbox.BorderSizePixel = 0
    textbox.Parent = frame
    Instance.new("UICorner", textbox).CornerRadius = UDim.new(0, 12)

    local submitButton = Instance.new("TextButton")
    submitButton.Size = UDim2.new(0, 140, 0, 35)
    submitButton.Position = UDim2.new(0, 20, 0, 110)
    submitButton.BackgroundColor3 = Color3.fromRGB(0, 120, 255)
    submitButton.TextColor3 = Color3.new(1,1,1)
    submitButton.Font = Enum.Font.GothamBold
    submitButton.TextSize = 20
    submitButton.Text = "Submit"
    submitButton.Parent = frame
    Instance.new("UICorner", submitButton).CornerRadius = UDim.new(0, 12)

    local linkButton = Instance.new("TextButton")
    linkButton.Size = UDim2.new(0, 140, 0, 35)
    linkButton.Position = UDim2.new(0, 180, 0, 110)
    linkButton.BackgroundColor3 = Color3.fromRGB(0, 200, 80)
    linkButton.TextColor3 = Color3.new(1,1,1)
    linkButton.Font = Enum.Font.GothamBold
    linkButton.TextSize = 18
    linkButton.Text = "Get Key Link"
    linkButton.Parent = frame
    Instance.new("UICorner", linkButton).CornerRadius = UDim.new(0, 12)

    local discordButton = Instance.new("TextButton")
    discordButton.Size = UDim2.new(0, 300, 0, 35)
    discordButton.Position = UDim2.new(0.5, -150, 0, 160)
    discordButton.BackgroundColor3 = Color3.fromRGB(88, 101, 242)
    discordButton.TextColor3 = Color3.new(1,1,1)
    discordButton.Font = Enum.Font.GothamBold
    discordButton.TextSize = 18
    discordButton.TextXAlignment = Enum.TextXAlignment.Left
    discordButton.Text = "Our Discord Server"
    discordButton.Parent = frame
    Instance.new("UICorner", discordButton).CornerRadius = UDim.new(0, 12)

    -- Discord Icon inside button
    local discordButton = Instance.new("TextButton")
discordButton.Size = UDim2.new(0, 300, 0, 35)
discordButton.Position = UDim2.new(0.5, -150, 0, 160)
discordButton.BackgroundColor3 = Color3.fromRGB(88, 101, 242)
discordButton.TextColor3 = Color3.new(1,1,1)
discordButton.Font = Enum.Font.GothamBold
discordButton.TextSize = 18
discordButton.Text = "Our Discord Server   "
discordButton.Parent = frame
Instance.new("UICorner", discordButton).CornerRadius = UDim.new(0, 12)

-- İkonu metnin sonuna ekleme için ImageLabel
local discordIcon = Instance.new("ImageLabel")
discordIcon.Size = UDim2.new(0, 24, 0, 24)
discordIcon.Position = UDim2.new(1, -28, 0.5, -12) -- Butonun sağ ucuna, ortalanmış
discordIcon.BackgroundTransparency = 1
discordIcon.Image = "rbxassetid://80918621663609" -- verdiğin decal ID
discordIcon.Parent = discordButton


    -- Message Icon (✅ or ❌)
    local messageIcon = Instance.new("ImageLabel")
    messageIcon.Size = UDim2.new(0, 20, 0, 20)
    messageIcon.Position = UDim2.new(0, 10, 0.5, -10)
    messageIcon.BackgroundTransparency = 1
    messageIcon.Parent = messageLabel
    messageIcon.Visible = false

    return gui, frame, textbox, submitButton, linkButton, discordButton, messageLabel, messageIcon
end

local function shakeFrame(frame)
    local tweenInfo = TweenInfo.new(0.05, Enum.EasingStyle.Linear, Enum.EasingDirection.InOut, 4, true)
    local tween1 = TweenService:Create(frame, tweenInfo, {Position = frame.Position + UDim2.new(0, 10, 0, 0)})
    local tween2 = TweenService:Create(frame, tweenInfo, {Position = frame.Position - UDim2.new(0, 10, 0, 0)})

    tween1:Play()
    tween1.Completed:Wait()
    tween2:Play()
    tween2.Completed:Wait()
    frame.Position = UDim2.new(0.5, 0, 0.5, 0)
end

local keyGui, keyFrame, keyTextbox, keySubmit, linkButton, discordButton, keyMessage, keyMessageIcon = createKeyInputGui()

keySubmit.MouseButton1Click:Connect(function()
    local enteredKey = keyTextbox.Text
    if enteredKey == keyCode then
        keyMessage.Text = "Correct Key! Loading Script..."
        keyMessageIcon.Image = "rbxassetid://92941793943536" -- ✅ icon
        keyMessageIcon.Visible = true
        wait(1)
        keyGui:Destroy()
        loadstring(game:HttpGet("https://raw.githubusercontent.com/kedd063/KdmlScripts/refs/heads/main/mine-key"))()
    else
        keyMessage.Text = "Incorrect Key! Try again."
        keyMessageIcon.Image = "rbxassetid://97098273678928" -- ❌ icon
        keyMessageIcon.Visible = true
        shakeFrame(keyFrame)
        keyTextbox.Text = ""
    end
end)

linkButton.MouseButton1Click:Connect(function()
    setClipboard(keyLink)
    keyMessage.Text = "Key link copied to clipboard!"
    keyMessageIcon.Visible = false
end)

discordButton.MouseButton1Click:Connect(function()
    setClipboard(discordLink)
    keyMessage.Text = "Discord link copied to clipboard!"
    keyMessageIcon.Visible = false
end)

keyTextbox.FocusLost:Connect(function(enterPressed)
    if enterPressed then
        keySubmit:Activate()
    end
end)
