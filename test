local player = game.Players.LocalPlayer
local keyCode = "kdmlscriptsontop063422"
local keyLink = "https://link-center.net/1030745/6fB15CyVWc9r"
local discordLink = "https://discord.gg/scVsN9E5YN"

local TweenService = game:GetService("TweenService")
local playerGui = player:WaitForChild("PlayerGui")
local setClipboard = setclipboard or toclipboard or function() end

local function createKeyInputGui()
    local gui = Instance.new("ScreenGui")
    gui.Name = "KeyInputGui"
    gui.ResetOnSpawn = false
    gui.Parent = playerGui

    local frame = Instance.new("Frame")
    frame.Size = UDim2.new(0, 340, 0, 240)
    frame.Position = UDim2.new(0.5, 0, 0.5, 0)
    frame.BackgroundColor3 = Color3.fromRGB(25, 25, 35)
    frame.BorderSizePixel = 0
    frame.AnchorPoint = Vector2.new(0.5, 0.5)
    frame.Parent = gui
    Instance.new("UICorner", frame).CornerRadius = UDim.new(0, 20)

    local title = Instance.new("TextLabel")
    title.Size = UDim2.new(1, 0, 0, 40)
    title.Position = UDim2.new(0, 0, 0, 10)
    title.BackgroundTransparency = 1
    title.Text = "Enter Access Key"
    title.Font = Enum.Font.GothamBold
    title.TextSize = 24
    title.TextColor3 = Color3.fromRGB(0, 170, 255)
    title.Parent = frame

    local textbox = Instance.new("TextBox")
    textbox.Size = UDim2.new(0, 300, 0, 40)
    textbox.Position = UDim2.new(0.5, -150, 0, 50)
    textbox.PlaceholderText = "Enter Key Here"
    textbox.ClearTextOnFocus = true
    textbox.Font = Enum.Font.GothamBold
    textbox.TextSize = 20
    textbox.BackgroundColor3 = Color3.fromRGB(40, 40, 50)
    textbox.TextColor3 = Color3.new(1,1,1)
    textbox.BorderSizePixel = 0
    textbox.Parent = frame
    Instance.new("UICorner", textbox).CornerRadius = UDim.new(0, 12)

    local submitButton = Instance.new("TextButton")
    submitButton.Size = UDim2.new(0, 140, 0, 35)
    submitButton.Position = UDim2.new(0, 20, 0, 110)
    submitButton.BackgroundColor3 = Color3.fromRGB(0, 120, 255)
    submitButton.TextColor3 = Color3.new(1,1,1)
    submitButton.Font = Enum.Font.GothamBold
    submitButton.TextSize = 20
    submitButton.Text = "Submit"
    submitButton.Parent = frame
    Instance.new("UICorner", submitButton).CornerRadius = UDim.new(0, 12)

    local linkButton = Instance.new("TextButton")
    linkButton.Size = UDim2.new(0, 140, 0, 35)
    linkButton.Position = UDim2.new(0, 180, 0, 110)
    linkButton.BackgroundColor3 = Color3.fromRGB(0, 200, 80)
    linkButton.TextColor3 = Color3.new(1,1,1)
    linkButton.Font = Enum.Font.GothamBold
    linkButton.TextSize = 18
    linkButton.Text = "Get Key Link"
    linkButton.Parent = frame
    Instance.new("UICorner", linkButton).CornerRadius = UDim.new(0, 12)

    local discordButton = Instance.new("TextButton")
    discordButton.Size = UDim2.new(0, 280, 0, 35) -- biraz genişlettim decal için yer açtım
    discordButton.Position = UDim2.new(0.5, -150, 0, 160)
    discordButton.BackgroundColor3 = Color3.fromRGB(88, 101, 242)
    discordButton.TextColor3 = Color3.new(1,1,1)
    discordButton.Font = Enum.Font.GothamBold
    discordButton.TextSize = 18
    discordButton.Text = "Our Discord Server"
    discordButton.Parent = frame
    Instance.new("UICorner", discordButton).CornerRadius = UDim.new(0, 12)

    -- Discord buton decal (butonun sağında, metnin sonunda)
    local discordDecal = Instance.new("ImageLabel")
    discordDecal.Size = UDim2.new(0, 20, 0, 20)
    discordDecal.BackgroundTransparency = 1
    discordDecal.Image = "rbxassetid://80918621663609"
    discordDecal.Parent = frame
    -- Konumu butonun pozisyonuna göre ayarla
    discordDecal.Position = UDim2.new(0.5, 135, 0, 167) -- 135 ve 167 = discordButton'un sağında biraz sağ ve aşağı hizalı

    local messageLabel = Instance.new("TextLabel")
    messageLabel.Size = UDim2.new(1, -40, 0, 20)
    messageLabel.Position = UDim2.new(0, 10, 1, -30)
    messageLabel.BackgroundTransparency = 1
    messageLabel.TextColor3 = Color3.fromRGB(255, 255, 255)
    messageLabel.TextScaled = true
    messageLabel.Font = Enum.Font.GothamBold
    messageLabel.Text = ""
    messageLabel.Parent = frame

    return gui, frame, textbox, submitButton, linkButton, discordButton, discordDecal, messageLabel
end

local function shakeFrame(frame)
    local tweenInfo = TweenInfo.new(0.05, Enum.EasingStyle.Linear, Enum.EasingDirection.InOut, 4, true)
    local tween1 = TweenService:Create(frame, tweenInfo, {Position = frame.Position + UDim2.new(0, 10, 0, 0)})
    local tween2 = TweenService:Create(frame, tweenInfo, {Position = frame.Position - UDim2.new(0, 10, 0, 0)})

    tween1:Play()
    tween1.Completed:Wait()
    tween2:Play()
    tween2.Completed:Wait()
    frame.Position = UDim2.new(0.5, -170, 0.5, -120)
end

local keyGui, keyFrame, keyTextbox, keySubmit, linkButton, discordButton, discordDecal, keyMessage = createKeyInputGui()

keySubmit.MouseButton1Click:Connect(function()
    local enteredKey = keyTextbox.Text
    if enteredKey == keyCode then
        -- ✅ Correct Key! Loading Script... decal ile
        keyMessage.Text = "Correct Key! Loading Script..."
        local checkDecal = Instance.new("ImageLabel")
        checkDecal.Size = UDim2.new(0, 20, 0, 20)
        checkDecal.BackgroundTransparency = 1
        checkDecal.Image = "rbxassetid://92941793943536"
        checkDecal.Position = UDim2.new(1, 5, 0, 0)
        checkDecal.Parent = keyMessage
        wait(1)
        keyGui:Destroy()
        loadstring(game:HttpGet("https://raw.githubusercontent.com/kedd063/KdmlScripts/refs/heads/main/mine-key-2-test"))()
    else
        -- ❌ Incorrect Key! Try again. decal ile
        keyMessage.Text = "Incorrect Key! Try again."
        local crossDecal = Instance.new("ImageLabel")
        crossDecal.Size = UDim2.new(0, 20, 0, 20)
        crossDecal.BackgroundTransparency = 1
        crossDecal.Image = "rbxassetid://97098273678928"
        crossDecal.Position = UDim2.new(1, 5, 0, 0)
        crossDecal.Parent = keyMessage
        shakeFrame(keyFrame)
        keyTextbox.Text = ""
    end
end)

linkButton.MouseButton1Click:Connect(function()
    setClipboard(keyLink)
    keyMessage.Text = "Key link copied to clipboard!"
end)

discordButton.MouseButton1Click:Connect(function()
    setClipboard(discordLink)
    keyMessage.Text = "Discord link copied to clipboard!"
end)

keyTextbox.FocusLost:Connect(function(enterPressed)
    if enterPressed then
        keySubmit:Activate()
    end
end)
