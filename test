local Players = game:GetService("Players")
local RunService = game:GetService("RunService")
local UIS = game:GetService("UserInputService")
local player = Players.LocalPlayer

-- Ana GUI
local screenGui = Instance.new("ScreenGui", player:WaitForChild("PlayerGui"))
screenGui.Name = "KdmlGui"

-- Ana Buton (Men√ºy√º a√ß/kapa)
local mainButton = Instance.new("ImageButton")
mainButton.Size = UDim2.new(0, 100, 0, 100)
mainButton.Position = UDim2.new(0, 10, 0.6, -50)
mainButton.BackgroundColor3 = Color3.fromRGB(40, 40, 40)
mainButton.AnchorPoint = Vector2.new(0, 0.5)
mainButton.Image = "rbxassetid://104833147631294"
mainButton.Name = "MainButton"
mainButton.Parent = screenGui
Instance.new("UICorner", mainButton).CornerRadius = UDim.new(0, 20)

-- Men√º Frame
local menuFrame = Instance.new("Frame")
menuFrame.Size = UDim2.new(0, 280, 0, 350)  -- k√º√ß√ºlt√ºld√º
menuFrame.Position = UDim2.new(0.3, 0, 0.5, -175)  -- konum ayarlandƒ±
menuFrame.BackgroundColor3 = Color3.fromRGB(140, 90, 255)
menuFrame.Active = true
menuFrame.Draggable = true
menuFrame.Visible = false
menuFrame.Name = "MenuFrame"
menuFrame.Parent = screenGui
Instance.new("UICorner", menuFrame).CornerRadius = UDim.new(0, 14)

-- Gradient Arka Plan
local gradient = Instance.new("UIGradient")
gradient.Color = ColorSequence.new{
	ColorSequenceKeypoint.new(0, Color3.fromRGB(200, 150, 255)),
	ColorSequenceKeypoint.new(1, Color3.fromRGB(255, 255, 255))
}
gradient.Rotation = 45
gradient.Parent = menuFrame

-- Ba≈ülƒ±k
local titleLabel = Instance.new("TextLabel")
titleLabel.Size = UDim2.new(1, 0, 0, 50)
titleLabel.Position = UDim2.new(0, 0, 0, 0)
titleLabel.BackgroundTransparency = 1
titleLabel.Text = "Kdml Scripts"
titleLabel.TextColor3 = Color3.new(1, 1, 1)
titleLabel.TextScaled = true
titleLabel.Font = Enum.Font.GothamBold
titleLabel.Parent = menuFrame

-- Sekmeler ve i√ßerikleri
local tabNames = {"Main", "Visual", "Misc", "Other Stuffs"}
local tabs = {}
local contents = {}

for i, name in ipairs(tabNames) do
	local tabButton = Instance.new("TextButton")
	tabButton.Size = UDim2.new(0.25, 0, 0, 40)
	tabButton.Position = UDim2.new(0.25 * (i - 1), 0, 0, 50)
	tabButton.Text = name
	tabButton.Font = Enum.Font.Gotham
	tabButton.TextColor3 = Color3.new(1, 1, 1)
	tabButton.BackgroundColor3 = Color3.fromRGB(60, 40, 100)
	tabButton.Parent = menuFrame
	Instance.new("UICorner", tabButton).CornerRadius = UDim.new(0, 6)
	tabs[name] = tabButton

	local contentFrame = Instance.new("Frame")
	contentFrame.Size = UDim2.new(1, -40, 1, -110)
        contentFrame.Position = UDim2.new(0, 10, 0, 110)
	contentFrame.BackgroundColor3 = Color3.fromRGB(80, 60, 120)
	contentFrame.Visible = false
	contentFrame.Parent = menuFrame
	Instance.new("UICorner", contentFrame).CornerRadius = UDim.new(0, 6)
	contents[name] = contentFrame
end

-- Buton olu≈üturma fonksiyonu
-- Buton sayƒ±sƒ±nƒ± sayan yardƒ±mcƒ± fonksiyon
local function countButtons(parent)
	local count = 0
	for _, child in ipairs(parent:GetChildren()) do
		if child:IsA("TextButton") then
			count += 1
		end
	end
	return count
end

-- Yeni buton olu≈üturma fonksiyonu
local function createMainButton(parent, text, callback)
    local btn = Instance.new("TextButton")
    btn.Size = UDim2.new(0, 200, 0, 30) -- Sabit boyut
    btn.Position = UDim2.new(0, 10, 0, (#parent:GetChildren() - 1) * 35)
    btn.Text = text
    btn.Font = Enum.Font.SourceSansBold
    btn.TextSize = 16
    btn.BackgroundColor3 = Color3.fromRGB(50, 50, 50)
    btn.TextColor3 = Color3.fromRGB(255, 255, 255)
    btn.BorderSizePixel = 0
    btn.Parent = parent

    btn.MouseButton1Click:Connect(callback)
end



-- MAIN sekmesine butonlar

-- Speed Boost
createMainButton(contents["Main"], "Speed Boost üèÉ‚Äç‚ôÇÔ∏èüëü", function()
	local boostedSpeed = 48
	local function applySpeedBoost()
		local char = player.Character or player.CharacterAdded:Wait()
		local humanoid = char:WaitForChild("Humanoid")
		humanoid.WalkSpeed = boostedSpeed
	end
	applySpeedBoost()
	player.CharacterAdded:Connect(function()
		task.wait(0.1)
		applySpeedBoost()
	end)
end)

-- Jump Boost
local jumpBoostEnabled = false
local jumpBoostConnection = nil

createMainButton(contents["Main"], "Jump Boost üîºüôç", function()
    local character = player.Character or player.CharacterAdded:Wait()
    local humanoid = character:WaitForChild("Humanoid")

    humanoid.Jumping:Connect(function(active)
        if active then
            local rootPart = character:WaitForChild("HumanoidRootPart")
            rootPart.CFrame = rootPart.CFrame + Vector3.new(0, 55, 0)
        end
    end)
end)



-- Float
createMainButton(contents["Main"], "Float üïäÔ∏è", function()
	local floatActive = false
	local floatSpeed = 46
	local floatTime = 5
	local startTime = 0

	local gui = Instance.new("ScreenGui", player:WaitForChild("PlayerGui"))
	gui.Name = "Float üïä"
	gui.ResetOnSpawn = false

	local frame = Instance.new("Frame")
	frame.Size = UDim2.new(0, 220, 0, 120)
	frame.Position = UDim2.new(0.5, -110, 0.7, 0)
	frame.BackgroundColor3 = Color3.fromRGB(20, 20, 30)
	frame.BorderColor3 = Color3.fromRGB(0, 170, 255)
	frame.BorderSizePixel = 3
	frame.Active = true
	frame.Draggable = true
	frame.Parent = gui

	local title = Instance.new("TextLabel")
	title.Size = UDim2.new(1, 0, 0, 30)
	title.BackgroundTransparency = 1
	title.Text = "Float üïä"
	title.Font = Enum.Font.GothamBold
	title.TextSize = 18
	title.TextColor3 = Color3.fromRGB(0, 170, 255)
	title.Parent = frame

	local button = Instance.new("TextButton")
	button.Size = UDim2.new(0, 180, 0, 40)
	button.Position = UDim2.new(0.5, -90, 0, 40)
	button.BackgroundColor3 = Color3.fromRGB(0, 120, 255)
	button.TextColor3 = Color3.new(1,1,1)
	button.TextScaled = true
	button.Font = Enum.Font.GothamBold
	button.Text = "Float"
	button.Parent = frame

	local countdownLabel = Instance.new("TextLabel")
	countdownLabel.Size = UDim2.new(0, 180, 0, 25)
	countdownLabel.Position = UDim2.new(0.5, -90, 0, 85)
	countdownLabel.BackgroundTransparency = 1
	countdownLabel.TextColor3 = Color3.new(1, 1, 1)
	countdownLabel.Font = Enum.Font.Gotham
	countdownLabel.TextScaled = true
	countdownLabel.Text = "Ready"
	countdownLabel.Parent = frame

	local moveConnection, gravityConnection
	local function stopFloat()
		floatActive = false
		button.Text = "Float"
		if moveConnection then moveConnection:Disconnect() end
		if gravityConnection then gravityConnection:Disconnect() end
	end

	local function startFloat()
		floatActive = true
		button.Text = "Stop"
		startTime = tick()
		local char = player.Character or player.CharacterAdded:Wait()
		local hrp = char:WaitForChild("HumanoidRootPart")

		gravityConnection = RunService.Heartbeat:Connect(function()
			hrp.Velocity = Vector3.new(hrp.Velocity.X, 0, hrp.Velocity.Z)
		end)

		moveConnection = RunService.Heartbeat:Connect(function()
			if not floatActive then return end
			local elapsed = tick() - startTime
			local remaining = floatTime - elapsed
			countdownLabel.Text = string.format("Ending in: %.1f", math.max(remaining, 0))
			if remaining <= 0 then
				stopFloat()
				countdownLabel.Text = "Done"
			else
				local dir = workspace.CurrentCamera.CFrame.LookVector
				local move = Vector3.new(dir.X, 0, dir.Z).Unit
				hrp.Velocity = move * floatSpeed
			end
		end)
	end

	button.MouseButton1Click:Connect(function()
		if not floatActive then startFloat() else stopFloat() end
	end)
end)

-- Main sekmesine Instant Steal tu≈üu
createMainButton(contents["Main"], "ƒ∞nstant Steal (code: arbix hub)", function()
    loadstring(game:HttpGet("https://raw.githubusercontent.com/Youifpg/Steal-a-Brianrot/refs/heads/main/Slowversion.lua"))()
end)


-- Visual sekmesine ESP toggle
local espButton = Instance.new("TextButton")
espButton.Size = UDim2.new(0, 220, 0, 40)
espButton.Position = UDim2.new(0, 15, 0, 10)
espButton.Text = "ESP: OFF"
espButton.BackgroundColor3 = Color3.fromRGB(255, 0, 0)
espButton.TextColor3 = Color3.new(1, 1, 1)
espButton.Parent = visualContent

local espEnabled = false

espButton.MouseButton1Click:Connect(function()
    espEnabled = not espEnabled
    if espEnabled then
        espButton.Text = "ESP: ON"
        espButton.BackgroundColor3 = Color3.fromRGB(0, 255, 0)
        -- BURAYA kendi ESP a√ßma kodunu ekle
        print("ESP A√ßƒ±ldƒ±")
    else
        espButton.Text = "ESP: OFF"
        espButton.BackgroundColor3 = Color3.fromRGB(255, 0, 0)
        -- BURAYA kendi ESP kapama kodunu ekle
        print("ESP Kapatƒ±ldƒ±")
    end
end)

-- MENU toggle
local isOpen = false
mainButton.MouseButton1Click:Connect(function()
	isOpen = not isOpen
	menuFrame.Visible = isOpen
	if isOpen then
		for name, frame in pairs(contents) do
			frame.Visible = (name == "Main")
		end
	end
end)


-- Misc sekmesine item alma butonlarƒ±
local function createMiscButton(parent, itemName)
	createMainButton(parent, itemName, function()
		local ReplicatedStorage = game:GetService("ReplicatedStorage")
		local net = ReplicatedStorage:WaitForChild("Packages"):WaitForChild("Net"):WaitForChild("RF/CoinsShopService/RequestBuy")
		pcall(function()
			net:InvokeServer(itemName)
			print(itemName .. " satƒ±n alƒ±ndƒ±.")
		end)
	end)
end

local miscItems = {
	"Trap",
	"Invisibility Cloak",
	"Medusa's Head",
	"Quantum Cloner",
	"Body Swap Potion"
}

for _, item in ipairs(miscItems) do
	createMiscButton(contents["Misc"], item)
end

-- Other Stuffs sekmesine Auto Candy Spin Wheel toggle
local autoSpinEnabled = false
local autoSpinLoop

local otherStuffsFrame = contents["Other Stuffs"]

local autoSpinToggle = Instance.new("TextButton")
autoSpinToggle.Size = UDim2.new(0, 280, 0, 50)
autoSpinToggle.Position = UDim2.new(0.5, -140, 0, 0)
autoSpinToggle.BackgroundColor3 = Color3.fromRGB(75, 0, 130)
autoSpinToggle.Font = Enum.Font.GothamBold
autoSpinToggle.TextColor3 = Color3.new(1,1,1)
autoSpinToggle.TextScaled = true
autoSpinToggle.Text = "Auto Candy Spin Wheel üé°üç¨ [OFF]"
autoSpinToggle.Parent = otherStuffsFrame
Instance.new("UICorner", autoSpinToggle).CornerRadius = UDim.new(0, 10)

autoSpinToggle.MouseButton1Click:Connect(function()
	autoSpinEnabled = not autoSpinEnabled
	autoSpinToggle.Text = autoSpinEnabled and "Auto Candy Spin Wheel üé°üç¨ [ON]" or "Auto Candy Spin Wheel üé°üç¨ [OFF]"
	autoSpinToggle.BackgroundColor3 = autoSpinEnabled and Color3.fromRGB(0, 170, 0) or Color3.fromRGB(75, 0, 130)

	if autoSpinEnabled then
		autoSpinLoop = task.spawn(function()
			while autoSpinEnabled do
				local net = game:GetService("ReplicatedStorage"):WaitForChild("Packages"):WaitForChild("Net")
				local spinEvent = net:WaitForChild("RE/CandyEventService/Spin")
				spinEvent:FireServer()
				task.wait(1)
			end
		end)
	else
		if autoSpinLoop then
			task.cancel(autoSpinLoop)
			autoSpinLoop = nil
		end
	end
end)

-- Sekme ge√ßi≈üi
for name, button in pairs(tabs) do
	button.MouseButton1Click:Connect(function()
		for otherName, frame in pairs(contents) do
			frame.Visible = (otherName == name)
		end
	end)
end

-- Men√º a√ß/kapa
local isOpen = false
mainButton.MouseButton1Click:Connect(function()
	isOpen = not isOpen
	menuFrame.Visible = isOpen
	if isOpen then
		for name, frame in pairs(contents) do
			frame.Visible = (name == "Main")
		end
	end
end)
