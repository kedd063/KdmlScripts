local Players = game:GetService("Players")
local RunService = game:GetService("RunService")
local UIS = game:GetService("UserInputService")
local player = Players.LocalPlayer

-- Emoji stringleri (Unicode escape formatƒ±nda)
local emojiSpeed = "\240\159\145\179\240\159\145\191"  -- üèÉ‚Äç‚ôÇÔ∏èüëü
local emojiJump = "\226\156\132\240\159\145\135"       -- üîºüôç
local emojiFloat = "\240\159\146\159"                   -- üïäÔ∏è
local emojiSpin = "\240\159\142\188\240\159\140\188"    -- üé°üç¨

-- Ana GUI
local screenGui = Instance.new("ScreenGui")
screenGui.Name = "KdmlGui"
screenGui.ResetOnSpawn = false
screenGui.Parent = player:WaitForChild("PlayerGui")

local mainButton = Instance.new("ImageButton")
mainButton.Size = UDim2.new(0, 100, 0, 100)
mainButton.Position = UDim2.new(0, 10, 0.6, -50)
mainButton.BackgroundColor3 = Color3.fromRGB(40, 40, 40)
mainButton.AnchorPoint = Vector2.new(0, 0.5)
mainButton.Image = "rbxassetid://104833147631294"
mainButton.Name = "MainButton"
mainButton.Active = true
mainButton.Selectable = true
mainButton.Parent = screenGui
Instance.new("UICorner", mainButton).CornerRadius = UDim.new(0, 20)

-- Men√º Frame
local menuFrame = Instance.new("Frame")
menuFrame.Size = UDim2.new(0, 280, 0, 350)
menuFrame.Position = UDim2.new(0.3, 0, 0.5, -175)
menuFrame.BackgroundColor3 = Color3.fromRGB(140, 90, 255)
menuFrame.Active = true
menuFrame.Draggable = true
menuFrame.Visible = false
menuFrame.Name = "MenuFrame"
menuFrame.Parent = screenGui
Instance.new("UICorner", menuFrame).CornerRadius = UDim.new(0, 14)

-- Gradient Arka Plan
local gradient = Instance.new("UIGradient")
gradient.Color = ColorSequence.new{
	ColorSequenceKeypoint.new(0, Color3.fromRGB(200, 150, 255)),
	ColorSequenceKeypoint.new(1, Color3.fromRGB(255, 255, 255))
}
gradient.Rotation = 45
gradient.Parent = menuFrame

-- Ba≈ülƒ±k
local titleLabel = Instance.new("TextLabel")
titleLabel.Size = UDim2.new(1, 0, 0, 50)
titleLabel.Position = UDim2.new(0, 0, 0, 0)
titleLabel.BackgroundTransparency = 1
titleLabel.Text = "Kdml Scripts"
titleLabel.TextColor3 = Color3.new(1, 1, 1)
titleLabel.TextScaled = true
titleLabel.Font = Enum.Font.GothamBold
titleLabel.Parent = menuFrame

-- Sekmeler ve i√ßerikleri
local tabNames = {"Main", "Visual", "Misc", "Other Stuffs"}
local tabs = {}
local contents = {}

for i, name in ipairs(tabNames) do
	local tabButton = Instance.new("TextButton")
	tabButton.Size = UDim2.new(0.25, 0, 0, 40)
	tabButton.Position = UDim2.new(0.25 * (i - 1), 0, 0, 50)
	tabButton.Text = name
	tabButton.Font = Enum.Font.Gotham
	tabButton.TextColor3 = Color3.new(1, 1, 1)
	tabButton.BackgroundColor3 = Color3.fromRGB(60, 40, 100)
	tabButton.Parent = menuFrame
	Instance.new("UICorner", tabButton).CornerRadius = UDim.new(0, 6)
	tabs[name] = tabButton

	local contentFrame = Instance.new("Frame")
	contentFrame.Size = UDim2.new(1, -40, 1, -110)
	contentFrame.Position = UDim2.new(0, 10, 0, 110)
	contentFrame.BackgroundColor3 = Color3.fromRGB(80, 60, 120)
	contentFrame.Visible = false
	contentFrame.Parent = menuFrame
	Instance.new("UICorner", contentFrame).CornerRadius = UDim.new(0, 6)
	contents[name] = contentFrame
end

-- Buton olu≈üturma fonksiyonu
local function createMainButton(parent, text, callback)
	local btn = Instance.new("TextButton")
	btn.Size = UDim2.new(0, 200, 0, 30)
	btn.Position = UDim2.new(0, 10, 0, (#parent:GetChildren() - 1) * 35)
	btn.Text = text
	btn.Font = Enum.Font.SourceSansBold
	btn.TextSize = 16
	btn.BackgroundColor3 = Color3.fromRGB(50, 50, 50)
	btn.TextColor3 = Color3.fromRGB(255, 255, 255)
	btn.BorderSizePixel = 0
	btn.Parent = parent

	btn.MouseButton1Click:Connect(callback)
end

-- MAIN sekmesine butonlar

-- Speed Boost
createMainButton(contents["Main"], "Speed Boost " .. emojiSpeed, function()
	local boostedSpeed = 48
	local function applySpeedBoost()
		local char = player.Character or player.CharacterAdded:Wait()
		local humanoid = char:WaitForChild("Humanoid")
		humanoid.WalkSpeed = boostedSpeed
	end
	applySpeedBoost()
	player.CharacterAdded:Connect(function()
		task.wait(0.1)
		applySpeedBoost()
	end)
end)

-- Jump Boost
local jumpBoostEnabled = false
local jumpBoostConnection = nil

createMainButton(contents["Main"], "Jump Boost " .. emojiJump, function()
	local character = player.Character or player.CharacterAdded:Wait()
	local humanoid = character:WaitForChild("Humanoid")

	humanoid.Jumping:Connect(function(active)
		if active then
			local rootPart = character:WaitForChild("HumanoidRootPart")
			rootPart.CFrame = rootPart.CFrame + Vector3.new(0, 55, 0)
		end
	end)
end)

-- Float
createMainButton(contents["Main"], "Float " .. emojiFloat, function()
	local floatActive = false
	local floatSpeed = 46
	local floatTime = 5
	local startTime = 0

	local gui = Instance.new("ScreenGui", player:WaitForChild("PlayerGui"))
	gui.Name = "Float " .. emojiFloat
	gui.ResetOnSpawn = false

	local frame = Instance.new("Frame")
	frame.Size = UDim2.new(0, 220, 0, 120)
	frame.Position = UDim2.new(0.5, -110, 0.7, 0)
	frame.BackgroundColor3 = Color3.fromRGB(20, 20, 30)
	frame.BorderColor3 = Color3.fromRGB(0, 170, 255)
	frame.BorderSizePixel = 3
	frame.Active = true
	frame.Draggable = true
	frame.Parent = gui

	local title = Instance.new("TextLabel")
	title.Size = UDim2.new(1, 0, 0, 30)
	title.BackgroundTransparency = 1
	title.Text = "Float " .. emojiFloat
	title.Font = Enum.Font.GothamBold
	title.TextSize = 18
	title.TextColor3 = Color3.fromRGB(0, 170, 255)
	title.Parent = frame

	local button = Instance.new("TextButton")
	button.Size = UDim2.new(0, 180, 0, 40)
	button.Position = UDim2.new(0.5, -90, 0, 40)
	button.BackgroundColor3 = Color3.fromRGB(0, 120, 255)
	button.TextColor3 = Color3.new(1,1,1)
	button.TextScaled = true
	button.Font = Enum.Font.GothamBold
	button.Text = "Float"
	button.Parent = frame

	local countdownLabel = Instance.new("TextLabel")
	countdownLabel.Size = UDim2.new(0, 180, 0, 25)
	countdownLabel.Position = UDim2.new(0.5, -90, 0, 85)
	countdownLabel.BackgroundTransparency = 1
	countdownLabel.TextColor3 = Color3.new(1, 1, 1)
	countdownLabel.Font = Enum.Font.Gotham
	countdownLabel.TextScaled = true
	countdownLabel.Text = "Ready"
	countdownLabel.Parent = frame

	local moveConnection, gravityConnection
	local function stopFloat()
		floatActive = false
		button.Text = "Float"
		if moveConnection then moveConnection:Disconnect() end
		if gravityConnection then gravityConnection:Disconnect() end
	end

	local function startFloat()
		floatActive = true
		button.Text = "Stop"
		startTime = tick()
		local char = player.Character or player.CharacterAdded:Wait()
		local hrp = char:WaitForChild("HumanoidRootPart")

		gravityConnection = RunService.Heartbeat:Connect(function()
			hrp.Velocity = Vector3.new(hrp.Velocity.X, 0, hrp.Velocity.Z)
		end)

		moveConnection = RunService.Heartbeat:Connect(function()
			if not floatActive then return end
			local elapsed = tick() - startTime
			local remaining = floatTime - elapsed
			countdownLabel.Text = string.format("Ending in: %.1f", math.max(remaining, 0))
			if remaining <= 0 then
				stopFloat()
				countdownLabel.Text = "Done"
			else
				local dir = workspace.CurrentCamera.CFrame.LookVector
				local move = Vector3.new(dir.X, 0, dir.Z).Unit
				hrp.Velocity = move * floatSpeed
			end
		end)
	end

	button.MouseButton1Click:Connect(function()
		if floatActive then
			stopFloat()
			countdownLabel.Text = "Stopped"
		else
			startFloat()
		end
	end)
end)

-- Auto Candy Spin Wheel Toggle
local autoSpinToggle = Instance.new("TextButton")
autoSpinToggle.Size = UDim2.new(0, 250, 0, 30)
autoSpinToggle.Position = UDim2.new(0, 10, 0, 5)
autoSpinToggle.BackgroundColor3 = Color3.fromRGB(70, 40, 150)
autoSpinToggle.TextColor3 = Color3.fromRGB(255, 255, 255)
autoSpinToggle.Font = Enum.Font.GothamBold
autoSpinToggle.TextSize = 14
autoSpinToggle.Text = "Auto Candy Spin Wheel " .. emojiSpin .. " [OFF]"
autoSpinToggle.Parent = contents["Main"]
Instance.new("UICorner", autoSpinToggle).CornerRadius = UDim.new(0, 6)

local autoSpinEnabled = false
autoSpinToggle.MouseButton1Click:Connect(function()
	autoSpinEnabled = not autoSpinEnabled
	autoSpinToggle.Text = "Auto Candy Spin Wheel " .. emojiSpin .. " [" .. (autoSpinEnabled and "ON" or "OFF") .. "]"
	if autoSpinEnabled then
		-- Spin fonksiyonu √ßalƒ±≈ütƒ±r
	else
		-- Spin fonksiyonunu durdur
	end
end)

-- Sekmeler arasƒ± ge√ßi≈ü
for name, tab in pairs(tabs) do
	tab.MouseButton1Click:Connect(function()
		for _, content in pairs(contents) do
			content.Visible = false
		end
		for _, t in pairs(tabs) do
			t.BackgroundColor3 = Color3.fromRGB(60, 40, 100)
		end
		contents[name].Visible = true
		tabs[name].BackgroundColor3 = Color3.fromRGB(80, 50, 160)
	end)
end

-- Men√º a√ßma kapama
mainButton.MouseButton1Click:Connect(function()
	menuFrame.Visible = not menuFrame.Visible
	if menuFrame.Visible then
		-- ƒ∞lk sekmeyi g√∂ster
		for _, content in pairs(contents) do
			content.Visible = false
		end
		contents["Main"].Visible = true
		for _, tab in pairs(tabs) do
			tab.BackgroundColor3 = Color3.fromRGB(60, 40, 100)
		end
		tabs["Main"].BackgroundColor3 = Color3.fromRGB(80, 50, 160)
	end
end)
