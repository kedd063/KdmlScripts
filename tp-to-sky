local player = game.Players.LocalPlayer
local playerGui = player:WaitForChild("PlayerGui")
local TweenService = game:GetService("TweenService")

local gui = Instance.new("ScreenGui")
gui.Name = "KdmlScripts"
gui.Parent = playerGui
gui.ResetOnSpawn = false

local frame = Instance.new("Frame")
frame.Size = UDim2.new(0, 200, 0, 140)
frame.Position = UDim2.new(0.5, -100, 0.5, -70)
frame.BackgroundColor3 = Color3.fromRGB(48, 25, 52)
frame.BackgroundTransparency = 0.1
frame.Parent = gui
frame.Active = true
frame.Draggable = true

local stroke = Instance.new("UIStroke")
stroke.Color = Color3.fromRGB(170, 0, 255)
stroke.Thickness = 3
stroke.ApplyStrokeMode = Enum.ApplyStrokeMode.Border
stroke.Parent = frame

local title = Instance.new("TextLabel")
title.Size = UDim2.new(1, 0, 0, 30)
title.Position = UDim2.new(0, 0, 0, 0)
title.BackgroundTransparency = 1
title.TextColor3 = Color3.new(1, 1, 1)
title.Text = "Kdml Scripts"
title.Font = Enum.Font.GothamBold
title.TextSize = 16
title.Parent = frame

local subtitle = Instance.new("TextLabel")
subtitle.Size = UDim2.new(1, 0, 0, 18)
subtitle.Position = UDim2.new(0, 0, 0, 30)
subtitle.BackgroundTransparency = 1
subtitle.TextColor3 = Color3.fromRGB(200, 200, 200)
subtitle.Text = "discord.gg/vsaKFZgYVD"
subtitle.Font = Enum.Font.Gotham
subtitle.TextSize = 13
subtitle.TextStrokeTransparency = 0.7
subtitle.TextWrapped = true
subtitle.Parent = frame

local colors = {
    Color3.fromRGB(170, 0, 255), -- mor
    Color3.fromRGB(255, 0, 0),   -- kırmızı
    Color3.fromRGB(0, 0, 255),   -- mavi
    Color3.fromRGB(0, 255, 0)    -- yeşil
}

local function lerpColor(c1, c2, alpha)
    return Color3.new(
        c1.R + (c2.R - c1.R) * alpha,
        c1.G + (c2.G - c1.G) * alpha,
        c1.B + (c2.B - c1.B) * alpha
    )
end

task.spawn(function()
    while true do
        for i = 1, #colors do
            local nextIndex = i == #colors and 1 or i + 1
            for alpha = 0, 1, 0.02 do
                title.TextColor3 = lerpColor(colors[i], colors[nextIndex], alpha)
                task.wait(0.03)
            end
        end
    end
end)

local button = Instance.new("TextButton")
button.Size = UDim2.new(1, -20, 0, 40)
button.Position = UDim2.new(0, 10, 0, 70)
button.BackgroundColor3 = Color3.fromRGB(0, 120, 255)
button.TextColor3 = Color3.new(1,1,1)
button.Font = Enum.Font.GothamBold
button.TextSize = 14
button.Text = "TP To Sky"
button.Parent = frame

local countdownLabel = Instance.new("TextLabel")
countdownLabel.Size = UDim2.new(1, -20, 0, 30)
countdownLabel.Position = UDim2.new(0, 10, 0, 115)
countdownLabel.BackgroundTransparency = 1
countdownLabel.TextColor3 = Color3.new(1, 1, 1)
countdownLabel.Font = Enum.Font.GothamBold
countdownLabel.TextSize = 16
countdownLabel.Text = ""
countdownLabel.Parent = frame

local yukaridaMi = false
local countdownRunning = false

local function TweenToPosition(rootPart, targetCFrame, duration)
    local tweenInfo = TweenInfo.new(duration or 0.5, Enum.EasingStyle.Quad, Enum.EasingDirection.Out)
    local tween = TweenService:Create(rootPart, tweenInfo, {CFrame = targetCFrame})
    tween:Play()
    tween.Completed:Wait()
end

button.MouseButton1Click:Connect(function()
    if countdownRunning then
        return -- geri sayım varsa yeni başlatma
    end

    local character = player.Character or player.CharacterAdded:Wait()
    local rootPart = character:FindFirstChild("HumanoidRootPart")
    if not rootPart then return end

    if yukaridaMi then
        -- Şu an yukarıda ise direk geri in
        button.Text = "TP To Sky"
        yukaridaMi = false
        TweenToPosition(rootPart, rootPart.CFrame - Vector3.new(0, 171, 0), 0.5)
        countdownLabel.Text = ""
    else
        -- Yukarı çık ve geri sayımı başlat
        local targetCFrame = rootPart.CFrame + Vector3.new(0, 171, 0)
        TweenToPosition(rootPart, targetCFrame, 0.5)
        button.Text = "TP To Ground"
        yukaridaMi = true

        countdownRunning = true
        for i = 3, 1, -1 do
            countdownLabel.Text = "Geri Sayım: "..i
            task.wait(1)
        end
        countdownLabel.Text = "Teleporting Back.."
        TweenToPosition(rootPart, rootPart.CFrame - Vector3.new(0, 171, 0), 0.5)
        button.Text = "TP To Sky"
        yukaridaMi = false
        countdownLabel.Text = ""
        countdownRunning = false
    end
end)
